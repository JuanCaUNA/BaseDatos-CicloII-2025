enum tipo_asiento {
  INGRESO
  GASTO
}

enum fuente_asiento {
  TURNO
  PROCEDIMIENTO
  PLANILLA_ADMINISTRATIVA
  PLANILLA_MEDICA
  AJUSTE
}

model asiento_financiero {
  id              Int            @id @default(autoincrement())
  tipo            tipo_asiento
  fuente          fuente_asiento
  fecha           DateTime
  periodo_anio    Int
  periodo_mes     Int
  monto           Decimal        @db.Decimal(18,2)
  centro_salud_id Int?
  referencia_id   Int?
  detalle         String?        @db.VarChar(255)

  creado_en       DateTime       @default(now())
  actualizado_en  DateTime       @updatedAt

  @@index([periodo_anio, periodo_mes])
  @@index([centro_salud_id])
  @@index([tipo])
  @@index([fuente])
}

model resumen_financiero_mensual {
  id             Int      @id @default(autoincrement())
  periodo_anio   Int
  periodo_mes    Int
  ingresos       Decimal  @db.Decimal(18,2) @default(0)
  gastos         Decimal  @db.Decimal(18,2) @default(0)
  utilidad       Decimal  @db.Decimal(18,2) @default(0)

  creado_en      DateTime @default(now())
  actualizado_en DateTime @updatedAt

  @@unique([periodo_anio, periodo_mes])
}

model resumen_financiero_centro_mensual {
  id              Int      @id @default(autoincrement())
  centro_salud_id Int
  periodo_anio    Int
  periodo_mes     Int
  ingresos        Decimal  @db.Decimal(18,2) @default(0)
  gastos          Decimal  @db.Decimal(18,2) @default(0)
  utilidad        Decimal  @db.Decimal(18,2) @default(0)

  creado_en       DateTime @default(now())
  actualizado_en  DateTime @updatedAt

  @@unique([centro_salud_id, periodo_anio, periodo_mes])
  @@index([centro_salud_id])
}
