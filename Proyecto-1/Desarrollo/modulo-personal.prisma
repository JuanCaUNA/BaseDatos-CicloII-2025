// estados
enum EstadoPerfil {
    ACTIVO
    INACTIVO
}

enum EstadoRegistro {
    PENDIENTE
    APROBADO
    RECHAZADO
}

enum Nacionalidad {
    NACIONAL
    EXTRANJERO
}

enum TipoUsuario {
    MEDICO
    ADMINISTRATIVO
}

enum TipoCuenta {
    AHORROS
    CORRIENTE
}

model ASC_Permiso {
    permiso_id Int @id @default(autoincrement())

    pantalla    String  @unique
    lectura     Boolean @default(false)
    escritura   Boolean @default(false)
    eliminacion Boolean @default(false)

    // Relaciones
    accesos    ASC_Accesos? @relation(fields: [accesos_id], references: [accesos_id])
    accesos_id Int?
}

model ASC_Accesos {
    accesos_id Int @id @default(autoincrement())

    tipo_usuario TipoUsuario

    permisos ASC_Permiso[]
}

model ASC_Detalle_documento {
    detalle_documento_id Int @id @default(autoincrement())

    tipo_usuario          TipoUsuario
    documentos_requeridos String
}

model ASC_Documento {
    documento_id Int @id @default(autoincrement())

    url         String @unique
    descripcion String

    // Relaciones
    medico            ASC_Medico?         @relation(fields: [medico_id], references: [medico_id])
    medico_id         Int?
    administrativo    ASC_Administrativo? @relation(fields: [administrativo_id], references: [administrativo_id])
    administrativo_id Int?
}

model ASC_Cuenta_Bancaria {
    cuentaBancaria_id Int @id @default(autoincrement())

    banco       String
    numero      String     @unique
    titular     String
    tipo_cuenta TipoCuenta

    es_principal Boolean

    // Relaciones
    usuario    ASC_Usuario? @relation(fields: [usuario_id], references: [usuario_id])
    usuario_id Int?
}

model ASC_Preregistro {
    Prerregistro_id Int    @id @default(autoincrement())
    cedula          String @unique

    // Información usuario
    nombre           String
    apellidos        String
    fecha_nacimiento DateTime
    sexo             String
    estado_civil     String
    nacionalidad     Nacionalidad
    residencia       String

    // Contacto
    email             String @unique
    telefono          String
    direccion_casa    String
    direccion_trabajo String

    // Estados
    estado_registro EstadoRegistro @default(PENDIENTE)
}

model ASC_Usuario {
    usuario_id Int    @id @default(autoincrement())
    cedula     String @unique

    // Información usuario
    nombre            String
    apellidos         String
    fecha_nacimiento  DateTime
    sexo              String
    estado_civil      String
    tipo_nacionalidad Nacionalidad

    tipo_usuario TipoUsuario

    // Informacion de cuentas bancarias
    cuentas_bancarias ASC_Cuenta_Bancaria[]

    // Contacto
    email             String @unique
    telefono          String
    residencia        String
    direccion_casa    String
    direccion_trabajo String

    // Relaciones
    medico         ASC_Medico[]
    administrativo ASC_Administrativo[]
}

model ASC_Medico {
    medico_id Int @id @default(autoincrement())

    documentos_requeridos ASC_Documento[]

    // Estado y tipo
    estado EstadoPerfil @default(ACTIVO)

    // Relaciones
    usuario                ASC_Usuario                  @relation(fields: [usuario_id], references: [usuario_id])
    usuario_id             Int                          @unique
    procedimiento_detalle  ASC_procedimiento_detalle[]
    escala_mensual_detalle ASC_escala_mensual_detalle[]
}

model ASC_Administrativo {
    administrativo_id Int @id @default(autoincrement())

    documentos_requeridos ASC_Documento[]

    // Estado y tipo
    estado EstadoPerfil @default(ACTIVO)

    // Relaciones
    usuario    ASC_Usuario @relation(fields: [usuario_id], references: [usuario_id])
    usuario_id Int         @unique
}
